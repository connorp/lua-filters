# HTML5-Articles

This filter constructs HTML5 `<article>` tags in lieu of `<section>` tags for
Divs with class `.article`. The class can be applied either to [fenced
divs](https://pandoc.org/MANUAL.html#extension-fenced_divs) or to headers, which
are converted to Divs in the AST via
[`--section-divs`](https://pandoc.org/MANUAL.html#option--section-divs). The
`<article>` tags can be used to provide additional structure to a webpage, and
can have different syntactical meaning for screenreaders and other web users
than exclusively using `<section>`.

If creating articles generated by `--section-divs`, the filter also manually
creates the tags for the header, to avoid the `<section>` tags being recreated
when the HTML writer calls `makeSections` a second time.

The filter applies identifiers, classes (except `section` and `article`), and
named attributes to the opening `<article>` tag (and the manually created header
tag, if required).

## Usage

Add the `article` class to a Div or header:

``` :::{#foo .article} Fenced content :::

# Top Heading {.article bar="baz"}

Content in a header ```

For `html` or `html5` output format, `<article>` tags are created rather than
`<section>` tags. Call pandoc using `--lua-filter=html5-articles.lua
--section-divs`, yielding the HTML:

``` <article id="foo"> <p>Fenced content</p> </article> <article
id="top-heading" bar="baz"> <h1 bar="baz"> Top Heading </h1> <p>Content in a
header</p> </article> ```

Note that named attributes (and classes) are applied both to the `<article>` tag
and the header tag, comporting with pandoc's default behavior for
`--section-divs`.

UNRESOLVED: need to parse named attributes to prepend 'data-' if needed (prepend unless they are a predefined HTML5 attribute, or already start with data-, or start with ARIA-.)

There are two potential issues with this filter that remain unresolved:

1. The filter assumes that, if the first element contained within a Div is a
header, then it was created by `--section-divs`, and we handle the header
manually. But this choice may cause unexpected behavior if other content can
appear before the header but within the Div.
2. The filter does not do anyprocessing or escaping of the identifiers, classes,
or named attributes attached to the Div and header, and simply applies them
directly to the manually created tags. If there are reserved words or characters
included in any of these elements, it could cause unexpected behavior.

